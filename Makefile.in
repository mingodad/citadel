# $Id$

CC=@CC@
CFLAGS=@CFLAGS@
DEFS=@DEFS@
LIBOBJS=@LIBOBJS@
LIBS=@LIBS@

# End of configuration section

all: webserver webcit


clean:
	rm -f *.o webcit webserver

distclean: clean
	rm -f Makefile config.cache config.log config.status


webserver: webserver.o context_loop.o $(LIBOBJS)
	$(CC) webserver.o context_loop.o $(LIBOBJS) $(LIBS) -o webserver

webserver.o: webserver.c webcit.h
	$(CC) $(CFLAGS) $(DEFS) -c -D_REENTRANT webserver.c

context_loop.o: context_loop.c webcit.h webserver.h
	$(CC) $(CFLAGS) $(DEFS) -c -D_REENTRANT context_loop.c

snprintf.o: snprintf.c
	$(CC) $(CFLAGS) $(DEFS) -c -D_REENTRANT snprintf.c



webcit: webcit.o auth.o tcp_sockets.o mainmenu.o serv_func.o who.o \
	roomops.o tools.o messages.o
	$(CC) webcit.o auth.o tcp_sockets.o mainmenu.o serv_func.o who.o \
	tools.o roomops.o messages.o -o webcit

webcit.o: webcit.c webcit.h child.h
	$(CC) $(CFLAGS) $(DEFS) -c webcit.c

auth.o: auth.c webcit.h child.h
	$(CC) $(CFLAGS) $(DEFS) -c auth.c

tcp_sockets.o: tcp_sockets.c webcit.h
	$(CC) $(CFLAGS) $(DEFS) -c tcp_sockets.c

mainmenu.o: mainmenu.c webcit.h child.h
	$(CC) $(CFLAGS) $(DEFS) -c mainmenu.c

serv_func.o: serv_func.c webcit.h child.h
	$(CC) $(CFLAGS) $(DEFS) -c serv_func.c

who.o: who.c webcit.h child.h
	$(CC) $(CFLAGS) $(DEFS) -c who.c

tools.o: tools.c webcit.h
	$(CC) $(CFLAGS) $(DEFS) -c tools.c

roomops.o: roomops.c webcit.h child.h
	$(CC) $(CFLAGS) $(DEFS) -c roomops.c

messages.o: messages.c webcit.h child.h
	$(CC) $(CFLAGS) $(DEFS) -c messages.c
